<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1000 550">
  <!-- Title -->
  <text x="500" y="35" text-anchor="middle" font="bold 26px sans-serif" fill="#2c3e50">
    Code Architecture: Before vs After DI
  </text>

  <!-- BEFORE DI -->
  <g transform="translate(0, 60)">
    <rect x="30" y="0" width="450" height="420" rx="10" fill="#fde8e8" stroke="#e74c3c" stroke-width="3"/>
    <text x="255" y="30" text-anchor="middle" font="bold 20px sans-serif" fill="#e74c3c">
      BEFORE DI - Messy and Interconnected
    </text>

    <!-- Tangled mess of classes -->
    <rect x="60" y="60" width="140" height="60" rx="6" fill="#e74c3c"/>
    <text x="130" y="85" text-anchor="middle" font="bold 13px sans-serif" fill="white">UserService</text>
    <text x="70" y="105" font="10px monospace" fill="white">new MySQLRepo()</text>
    <text x="70" y="120" font="10px monospace" fill="white">new EmailService()</text>

    <rect x="270" y="60" width="140" height="60" rx="6" fill="#c0392b"/>
    <text x="340" y="85" text-anchor="middle" font="bold 13px sans-serif" fill="white">MySQLRepo</text>
    <text x="280" y="105" font="10px monospace" fill="white">new Connection()</text>

    <rect x="60" y="160" width="140" height="60" rx="6" fill="#c0392b"/>
    <text x="130" y="185" text-anchor="middle" font="bold 13px sans-serif" fill="white">EmailService</text>
    <text x="70" y="205" font="10px monospace" fill="white">new SMTPClient()</text>

    <rect x="270" y="160" width="140" height="60" rx="6" fill="#c0392b"/>
    <text x="340" y="185" text-anchor="middle" font="bold 13px sans-serif" fill="white">OrderService</text>
    <text x="280" y="205" font="10px monospace" fill="white">new UserService()</text>

    <rect x="165" y="260" width="140" height="60" rx="6" fill="#c0392b"/>
    <text x="235" y="285" text-anchor="middle" font="bold 13px sans-serif" fill="white">PaymentService</text>
    <text x="175" y="305" font="10px monospace" fill="white">new DBConnection()</text>

    <!-- Tangled lines showing tight coupling -->
    <path d="M 200 90 L 270 90" stroke="#e74c3c" stroke-width="3" fill="none"/>
    <path d="M 130 120 L 130 160" stroke="#e74c3c" stroke-width="3" fill="none"/>
    <path d="M 200 190 L 270 190" stroke="#e74c3c" stroke-width="3" fill="none"/>
    <path d="M 340 120 L 340 160" stroke="#e74c3c" stroke-width="3" fill="none"/>
    <path d="M 130 220 L 180 260" stroke="#e74c3c" stroke-width="3" fill="none"/>
    <path d="M 340 220 L 290 260" stroke="#e74c3c" stroke-width="3" fill="none"/>
    <path d="M 200 90 L 280 180" stroke="#e74c3c" stroke-width="3" fill="none"/>

    <!-- Problems -->
    <text x="255" y="355" text-anchor="middle" font="bold 14px sans-serif" fill="#c0392b">
      Problems:
    </text>
    <text x="50" y="380" font="12px sans-serif" fill="#c0392b">X Spaghetti code</text>
    <text x="50" y="400" font="12px sans-serif" fill="#c0392b">X Hard to test</text>
    <text x="240" y="380" font="12px sans-serif" fill="#c0392b">X Tight coupling</text>
    <text x="240" y="400" font="12px sans-serif" fill="#c0392b">X Fear to change</text>
  </g>

  <!-- AFTER DI -->
  <g transform="translate(520, 60)">
    <rect x="30" y="0" width="450" height="420" rx="10" fill="#e8f8f0" stroke="#27ae60" stroke-width="3"/>
    <text x="255" y="30" text-anchor="middle" font="bold 20px sans-serif" fill="#27ae60">
      AFTER DI - Clean and Modular
    </text>

    <!-- DI Container -->
    <rect x="130" y="50" width="250" height="50" rx="8" fill="#3498db"/>
    <text x="255" y="80" text-anchor="middle" font="bold 15px sans-serif" fill="white">
      DI Container manages everything
    </text>

    <!-- Clean, organized modules -->
    <rect x="60" y="130" width="140" height="55" rx="6" fill="#27ae60"/>
    <text x="130" y="153" text-anchor="middle" font="bold 13px sans-serif" fill="white">UserService</text>
    <text x="70" y="173" font="10px sans-serif" fill="white">Dependencies injected</text>

    <rect x="270" y="130" width="140" height="55" rx="6" fill="#27ae60"/>
    <text x="340" y="153" text-anchor="middle" font="bold 13px sans-serif" fill="white">MySQLRepo</text>
    <text x="280" y="173" font="10px sans-serif" fill="white">Managed by DI</text>

    <rect x="60" y="210" width="140" height="55" rx="6" fill="#27ae60"/>
    <text x="130" y="233" text-anchor="middle" font="bold 13px sans-serif" fill="white">EmailService</text>
    <text x="70" y="253" font="10px sans-serif" fill="white">Managed by DI</text>

    <rect x="270" y="210" width="140" height="55" rx="6" fill="#27ae60"/>
    <text x="340" y="233" text-anchor="middle" font="bold 13px sans-serif" fill="white">OrderService</text>
    <text x="280" y="253" font="10px sans-serif" fill="white">Dependencies injected</text>

    <rect x="165" y="290" width="140" height="55" rx="6" fill="#27ae60"/>
    <text x="235" y="313" text-anchor="middle" font="bold 13px sans-serif" fill="white">PaymentService</text>
    <text x="175" y="333" font="10px sans-serif" fill="white">Managed by DI</text>

    <!-- Clean lines from container -->
    <path d="M 180 100 L 130 130" stroke="#3498db" stroke-width="2" stroke-dasharray="5,3" fill="none"/>
    <path d="M 255 100 L 255 130" stroke="#3498db" stroke-width="2" stroke-dasharray="5,3" fill="none"/>
    <path d="M 330 100 L 340 130" stroke="#3498db" stroke-width="2" stroke-dasharray="5,3" fill="none"/>
    <path d="M 200 100 L 130 210" stroke="#3498db" stroke-width="2" stroke-dasharray="5,3" fill="none"/>
    <path d="M 310 100 L 340 210" stroke="#3498db" stroke-width="2" stroke-dasharray="5,3" fill="none"/>
    <path d="M 255 100 L 235 290" stroke="#3498db" stroke-width="2" stroke-dasharray="5,3" fill="none"/>

    <!-- Benefits -->
    <text x="255" y="375" text-anchor="middle" font="bold 14px sans-serif" fill="#229954">
      Benefits:
    </text>
    <text x="50" y="400" font="12px sans-serif" fill="#229954">+ Clean architecture</text>
    <text x="240" y="400" font="12px sans-serif" fill="#229954">+ Easy to test</text>
    <text x="50" y="415" font="12px sans-serif" fill="#229954">+ Loose coupling</text>
    <text x="240" y="415" font="12px sans-serif" fill="#229954">+ Confident changes</text>
  </g>

  <!-- Bottom comparison -->
  <rect x="50" y="510" width="900" height="30" rx="8" fill="#3498db"/>
  <text x="500" y="532" text-anchor="middle" font="bold 14px sans-serif" fill="white">
    DI transforms messy, tightly-coupled spaghetti into clean, modular architecture
  </text>
</svg>
