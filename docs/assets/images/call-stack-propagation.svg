<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 900 750">
  <!-- Title -->
  <text x="450" y="35" font-family="Arial, sans-serif" font-size="26" font-weight="bold" text-anchor="middle" fill="#333">
    Call Stack &amp; Exception Propagation
  </text>
  <text x="450" y="60" font-family="Arial, sans-serif" font-size="14" text-anchor="middle" fill="#666">
    (Stack Unwinding Process)
  </text>
  
  <!-- Left side - Normal Execution -->
  <text x="200" y="95" font-family="Arial, sans-serif" font-size="18" font-weight="bold" text-anchor="middle" fill="#28a745">
    Normal Execution (Top → Down)
  </text>
  
  <!-- Right side - Exception Propagation -->
  <text x="650" y="95" font-family="Arial, sans-serif" font-size="18" font-weight="bold" text-anchor="middle" fill="#dc3545">
    Exception Propagation (Bottom → Up)
  </text>
  
  <!-- Divider line -->
  <line x1="425" y1="75" x2="425" y2="720" stroke="#dee2e6" stroke-width="2" stroke-dasharray="10,5"/>
  
  <!-- LEFT SIDE - Normal Call Flow -->
  
  <!-- main() method -->
  <rect x="50" y="120" width="300" height="80" rx="8" fill="#e7f5ff" stroke="#1971c2" stroke-width="3"/>
  <text x="200" y="145" font-family="Arial, sans-serif" font-size="16" font-weight="bold" text-anchor="middle" fill="#1971c2">
    main()
  </text>
  <text x="200" y="165" font-family="Arial, sans-serif" font-size="13" text-anchor="middle" fill="#495057">
    System.out.println("Start");
  </text>
  <text x="200" y="185" font-family="Arial, sans-serif" font-size="13" text-anchor="middle" fill="#495057">
    methodA();
  </text>
  
  <!-- Arrow down -->
  <defs>
    <marker id="arrowGreen" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#28a745"/>
    </marker>
    <marker id="arrowRed" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#dc3545"/>
    </marker>
  </defs>
  <line x1="200" y1="200" x2="200" y2="240" stroke="#28a745" stroke-width="3" marker-end="url(#arrowGreen)"/>
  <text x="215" y="225" font-family="Arial, sans-serif" font-size="12" fill="#28a745">Call</text>
  
  <!-- methodA() -->
  <rect x="50" y="240" width="300" height="80" rx="8" fill="#d3f9d8" stroke="#2f9e44" stroke-width="3"/>
  <text x="200" y="265" font-family="Arial, sans-serif" font-size="16" font-weight="bold" text-anchor="middle" fill="#2f9e44">
    methodA()
  </text>
  <text x="200" y="285" font-family="Arial, sans-serif" font-size="13" text-anchor="middle" fill="#495057">
    System.out.println("In A");
  </text>
  <text x="200" y="305" font-family="Arial, sans-serif" font-size="13" text-anchor="middle" fill="#495057">
    methodB();
  </text>
  
  <!-- Arrow down -->
  <line x1="200" y1="320" x2="200" y2="360" stroke="#28a745" stroke-width="3" marker-end="url(#arrowGreen)"/>
  <text x="215" y="345" font-family="Arial, sans-serif" font-size="12" fill="#28a745">Call</text>
  
  <!-- methodB() -->
  <rect x="50" y="360" width="300" height="100" rx="8" fill="#c3fae8" stroke="#12b886" stroke-width="3"/>
  <text x="200" y="385" font-family="Arial, sans-serif" font-size="16" font-weight="bold" text-anchor="middle" fill="#087f5b">
    methodB()
  </text>
  <text x="200" y="405" font-family="Arial, sans-serif" font-size="13" text-anchor="middle" fill="#495057">
    System.out.println("In B");
  </text>
  <text x="200" y="425" font-family="Arial, sans-serif" font-size="13" text-anchor="middle" fill="#495057">
    int x = 10;
  </text>
  <text x="200" y="445" font-family="Arial, sans-serif" font-size="13" font-weight="bold" text-anchor="middle" fill="#dc3545">
    int y = x / 0; // Exception! ⚠️
  </text>
  
  <!-- Execution order labels -->
  <circle cx="30" cy="160" r="15" fill="#1971c2"/>
  <text x="30" y="166" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="white">1</text>
  
  <circle cx="30" cy="280" r="15" fill="#2f9e44"/>
  <text x="30" y="286" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="white">2</text>
  
  <circle cx="30" cy="410" r="15" fill="#087f5b"/>
  <text x="30" y="416" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="white">3</text>
  
  <!-- RIGHT SIDE - Exception Propagation -->
  
  <!-- Exception creation -->
  <rect x="475" y="360" width="350" height="100" rx="8" fill="#ffe0e0" stroke="#ff6b6b" stroke-width="3"/>
  <text x="650" y="385" font-family="Arial, sans-serif" font-size="16" font-weight="bold" text-anchor="middle" fill="#c92a2a">
    ⚠️ Exception in methodB()
  </text>
  <text x="650" y="410" font-family="Arial, sans-serif" font-size="13" text-anchor="middle" fill="#495057">
    ArithmeticException created
  </text>
  <text x="650" y="430" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#666">
    No try-catch in methodB()
  </text>
  <text x="650" y="448" font-family="Arial, sans-serif" font-size="12" font-weight="bold" text-anchor="middle" fill="#dc3545">
    → Propagate to caller (methodA)
  </text>
  
  <!-- Arrow up to methodA -->
  <line x1="650" y1="360" x2="650" y2="320" stroke="#dc3545" stroke-width="3" marker-end="url(#arrowRed)"/>
  <text x="665" y="345" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#dc3545">Throw</text>
  
  <!-- Exception in methodA -->
  <rect x="475" y="240" width="350" height="80" rx="8" fill="#fff0f0" stroke="#ff8787" stroke-width="3"/>
  <text x="650" y="265" font-family="Arial, sans-serif" font-size="16" font-weight="bold" text-anchor="middle" fill="#c92a2a">
    Exception in methodA()
  </text>
  <text x="650" y="290" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#666">
    No try-catch in methodA()
  </text>
  <text x="650" y="308" font-family="Arial, sans-serif" font-size="12" font-weight="bold" text-anchor="middle" fill="#dc3545">
    → Propagate to caller (main)
  </text>
  
  <!-- Arrow up to main -->
  <line x1="650" y1="240" x2="650" y2="200" stroke="#dc3545" stroke-width="3" marker-end="url(#arrowRed)"/>
  <text x="665" y="225" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#dc3545">Throw</text>
  
  <!-- Exception in main -->
  <rect x="475" y="120" width="350" height="80" rx="8" fill="#ffebeb" stroke="#ffa8a8" stroke-width="3"/>
  <text x="650" y="145" font-family="Arial, sans-serif" font-size="16" font-weight="bold" text-anchor="middle" fill="#c92a2a">
    Exception in main()
  </text>
  <text x="650" y="170" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#666">
    No try-catch in main()
  </text>
  <text x="650" y="188" font-family="Arial, sans-serif" font-size="12" font-weight="bold" text-anchor="middle" fill="#c92a2a">
    → Propagate to JVM
  </text>
  
  <!-- Propagation order labels -->
  <circle cx="850" cy="410" r="15" fill="#c92a2a"/>
  <text x="850" y="416" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="white">1</text>
  
  <circle cx="850" cy="280" r="15" fill="#e03131"/>
  <text x="850" y="286" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="white">2</text>
  
  <circle cx="850" cy="160" r="15" fill="#fa5252"/>
  <text x="850" y="166" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="white">3</text>
  
  <!-- JVM Termination -->
  <rect x="475" y="510" width="350" height="90" rx="10" fill="#862e2e" stroke="#5c1111" stroke-width="3"/>
  <text x="650" y="540" font-family="Arial, sans-serif" font-size="18" font-weight="bold" text-anchor="middle" fill="white">
    ❌ JVM Default Handler
  </text>
  <text x="650" y="565" font-family="Arial, sans-serif" font-size="13" text-anchor="middle" fill="#ffe0e0">
    1. Print exception name &amp; message
  </text>
  <text x="650" y="585" font-family="Arial, sans-serif" font-size="13" text-anchor="middle" fill="#ffe0e0">
    2. Print stack trace
  </text>
  
  <!-- Arrow from main to JVM -->
  <line x1="650" y1="120" x2="650" y2="80" stroke="#c92a2a" stroke-width="3"/>
  <line x1="650" y1="80" x2="750" y2="80" stroke="#c92a2a" stroke-width="3"/>
  <line x1="750" y1="80" x2="750" y2="510" stroke="#c92a2a" stroke-width="3" marker-end="url(#arrowRed)"/>
  <text x="760" y="300" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#c92a2a">Unhandled</text>
  
  <text x="650" y="593" font-family="Arial, sans-serif" font-size="13" text-anchor="middle" fill="#ffe0e0">
    3. Terminate program
  </text>
  
  <!-- Stack Trace Output -->
  <rect x="50" y="510" width="350" height="200" rx="8" fill="#2d3748" stroke="#4a5568" stroke-width="2"/>
  <text x="225" y="535" font-family="Courier New, monospace" font-size="14" font-weight="bold" text-anchor="middle" fill="#ffa8a8">
    Stack Trace Output:
  </text>
  <text x="60" y="560" font-family="Courier New, monospace" font-size="11" fill="#f8f9fa">
    Exception in thread "main"
  </text>
  <text x="60" y="580" font-family="Courier New, monospace" font-size="11" fill="#ffa8a8">
    java.lang.ArithmeticException:
  </text>
  <text x="60" y="595" font-family="Courier New, monospace" font-size="11" fill="#ffa8a8">
    / by zero
  </text>
  <text x="70" y="615" font-family="Courier New, monospace" font-size="11" fill="#ffd43b">
    at Test.methodB(Test.java:15)
  </text>
  <text x="70" y="635" font-family="Courier New, monospace" font-size="11" fill="#ffd43b">
    at Test.methodA(Test.java:10)
  </text>
  <text x="70" y="655" font-family="Courier New, monospace" font-size="11" fill="#ffd43b">
    at Test.main(Test.java:5)
  </text>
  <text x="60" y="680" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#a0aec0">
    ↑ Bottom of stack
  </text>
  <text x="390" y="680" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#a0aec0">
    Top of stack ↑
  </text>
  
  <!-- Key Concepts Box -->
  <rect x="50" y="630" width="800" height="95" rx="8" fill="#f8f9fa" stroke="#dee2e6" stroke-width="2"/>
  <text x="450" y="655" font-family="Arial, sans-serif" font-size="16" font-weight="bold" text-anchor="middle" fill="#333">
    Key Concepts
  </text>
  
  <text x="70" y="678" font-family="Arial, sans-serif" font-size="13" fill="#333">
    <tspan font-weight="bold" fill="#1971c2">Stack Unwinding:</tspan> Process of going back up the call stack looking for exception handler
  </text>
  
  <text x="70" y="698" font-family="Arial, sans-serif" font-size="13" fill="#333">
    <tspan font-weight="bold" fill="#e03131">Propagation:</tspan> Exception moves from callee → caller until handler found or JVM reached
  </text>
  
  <text x="70" y="715" font-family="Arial, sans-serif" font-size="13" fill="#333">
    <tspan font-weight="bold" fill="#087f5b">Call Stack:</tspan> LIFO structure - Last method called (deepest) is first to throw exception
  </text>
</svg>
